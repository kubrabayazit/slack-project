webpackJsonp([1],{"4j4i":function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("7+uW"),a={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var r=n("VU/8")({name:"App"},a,!1,function(e){n("gsu9")},null,null).exports,i=n("/ocq"),c=n("Dd8w"),o=n.n(c),l=(n("dih4"),n("NYxO")),u=(n("hZls"),{name:"channels",data:function(){return{isOpen:!1,new_channel:"",errors:[],channelsRef:firebase.database().ref("channels"),channels:[],channel:null}},computed:o()({},Object(l.b)(["currentChannel"]),{hasErrors:function(){return this.errors.length>0}}),methods:{addChannel:function(){var e=this,t=this.channelsRef.push().key;console.log("new keyyy",t);var n={id:t,name:this.new_channel};this.channelsRef.child(t).update(n).then(function(){e.new_channel="",$("#channelModal").modal("hide")}).catch(function(){e.errors.push(console.error.message)})},addListeners:function(){var e=this;this.channelsRef.on("child_added",function(t){e.channels.push(t.val()),e.channels.length>0&&(e.channel=e.channels[0],e.$store.dispatch("setCurrentChannel",e.channel))})},setActiveChannel:function(e){return e.id===this.currentChannel.id},changeChannel:function(e){this.$store.dispatch("setCurrentChannel",e)},detachListeners:function(){this.channelsRef.off()}},mounted:function(){this.addListeners()},beforeDestroy:function(){this.detachListeners()}}),d={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h3",{staticStyle:{display:"flex",color:"white"}},[e._v("Channels")]),e._v(" "),n("div",e._l(e.channels,function(t){return n("a",{key:t.id,staticClass:"list-channels",class:{active:e.setActiveChannel(t)},attrs:{type:"button"},on:{click:function(n){return e.changeChannel(t)}}},[e._v("# "+e._s(t.name))])}),0),e._v(" "),n("transition",{attrs:{name:"modal"}},[e.isOpen?n("div",[n("div",{staticClass:"overlay",on:{click:function(t){if(t.target!==t.currentTarget)return null;e.isOpen=!1}}},[n("div",{staticClass:"modal"},[n("h1",[e._v("Create a channel")]),e._v(" "),n("form",[n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.new_channel,expression:"new_channel"}],staticClass:"input-form",attrs:{type:"text",id:"new_channel",name:"new_channel",placeholder:"channel name"},domProps:{value:e.new_channel},on:{input:function(t){t.target.composing||(e.new_channel=t.target.value)}}})]),e._v(" "),n("div",{staticClass:"modal-footer"},[n("button",{staticClass:"cancel",attrs:{type:"button"}},[e._v("Cancel")]),e._v(" "),n("button",{staticClass:"add-channel",attrs:{type:"button"},on:{click:e.addChannel}},[e._v("Add Channel")])])])])])]):e._e()]),e._v(" "),n("button",{on:{click:function(t){e.isOpen=!e.isOpen}}},[e._v("\n    "+e._s(e.isOpen?"Close":"Add")+" channel\n  ")])],1)},staticRenderFns:[]};var h={name:"sidebar",components:{Channels:n("VU/8")(u,d,!1,function(e){n("zCuW")},"data-v-2fc3f026",null).exports},computed:o()({},Object(l.b)(["currentUser"]))},m={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h2",{staticClass:"text",staticStyle:{color:"white"}},[e._v("Gricreative")]),e._v(" "),n("hr",{staticStyle:{border:"1px solid #333"}}),e._v(" "),n("span",[n("img",{staticClass:"image",attrs:{height:"30",src:e.currentUser.photoURL}}),e._v(" "),n("span",{staticClass:"display-name",staticStyle:{color:"white"}},[e._v(e._s(e.currentUser.displayName))])]),e._v(" "),n("hr",{staticStyle:{border:"1px solid #333"}}),e._v(" "),n("channels")],1)},staticRenderFns:[]};var v=n("VU/8")(h,m,!1,function(e){n("mq1k")},"data-v-e9335450",null).exports,f={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"user-message"},e._l(e.messages,function(t){return n("div",{key:t},[n("div",{staticClass:"media"},[n("img",{staticClass:"image",attrs:{src:t.user.image,height:"40"}}),e._v(" "),n("div",{staticClass:"media-username"},[n("a",{staticClass:"username",attrs:{href:"#"}},[e._v(e._s(t.user.name))]),e._v(" "),n("div",{staticClass:"content"},[e._v(e._s(t.content))])])])])}),0)])},staticRenderFns:[]};var p=n("VU/8")({name:"side-message",props:["messages"]},f,!1,function(e){n("4j4i")},"data-v-16a228d0",null).exports,g={name:"message-form",data:function(){return{message:"",errors:[]}},computed:o()({},Object(l.b)(["currentChannel","currentUser"])),methods:{sendMessage:function(){var e={content:this.message,timestamp:firebase.database.ServerValue.TIMESTAMP,user:{name:this.currentUser.displayName,image:this.currentUser.photoURL,id:this.currentUser.uid}};null!==this.currentChannel&&this.message.length>0&&(this.$parent.messagesRef.child(this.currentChannel.id).push().set(e).then(function(){}),this.message="")}}},_={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"message-form"},[n("form",[n("div",{staticClass:"input"},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.message,expression:"message",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",name:"message",id:"message",placeholder:"Typing",autofocus:""},domProps:{value:e.message},on:{input:function(t){t.target.composing||(e.message=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),n("div",{staticClass:"input-group"},[n("button",{staticClass:"input-group__button button-send",attrs:{type:"button"},on:{click:e.sendMessage}},[e._v("Send")])])])])])])},staticRenderFns:[]};var C={name:"messages",components:{SideMessage:p,MessageForm:n("VU/8")(g,_,!1,function(e){n("ye3+")},"data-v-211a0f0a",null).exports},data:function(){return{messagesRef:firebase.database().ref("messages"),messages:[],channel:""}},computed:o()({},Object(l.b)(["currentChannel"])),watch:{currentChannel:function(){this.messages=[],this.addListeners(),this.channel=this.currentChannel}},methods:{addListeners:function(){var e=this;this.messagesRef.child(this.currentChannel.id).on("child_added",function(t){e.messages.push(t.val())})},detachListeners:function(){null!==this.channel&&this.messagesRef.child(this.channel.id).off()}},beforeDestroy:function(){this.detachListeners()}},b={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("side-message",{attrs:{messages:this.messages}}),this._v(" "),t("message-form")],1)},staticRenderFns:[]},w={name:"chat",components:{Sidebar:v,Messages:n("VU/8")(C,b,!1,null,null,null).exports}},y={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",{staticClass:"container"},[t("div",{staticClass:"row"},[t("div",{staticClass:"sidebar"},[t("hr",{staticStyle:{border:"1px solid #333"}}),this._v(" "),t("sidebar")],1),this._v(" "),t("div",{staticClass:"content"},[t("messages")],1)])])])},staticRenderFns:[]};var U=n("VU/8")(w,y,!1,function(e){n("q0SP")},"data-v-ea0ca1d4",null).exports,R={name:"login",data:function(){return{errors:[],loading:!1,usersRef:firebase.database().ref("users")}},computed:{hasErrors:function(){return this.errors.length>0}},methods:{login:function(){var e=this;firebase.auth().signInWithPopup(new firebase.auth.GoogleAuthProvider).then(function(t){e.saveUserToUsersRef(t.user),e.$store.dispatch("setUser",t.user),console.log("response.user",t.user),e.$router.push("/")})},saveUserToUsersRef:function(e){return this.usersRef.child(e.uid).set({name:e.displayName,image:e.photoURL})}}},S={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"grid"},[n("div",{staticClass:"blue a"}),e._v(" "),n("div",{staticClass:"blue b"}),e._v(" "),n("div",{staticClass:"green a"}),e._v(" "),n("div",{staticClass:"green b"}),e._v(" "),n("div",{staticClass:"yellow a"}),e._v(" "),n("div",{staticClass:"yellow b"}),e._v(" "),n("div",{staticClass:"red a"}),e._v(" "),n("div",{staticClass:"red b"}),e._v(" "),n("div",{staticClass:"container"},[n("div",{staticClass:"row"},[n("button",{staticClass:"button-login",on:{click:e.login}},[e._v("Login")])])])])},staticRenderFns:[]};var E=n("VU/8")(R,S,!1,function(e){n("ZZgg")},null,null).exports;s.a.use(i.a);var x=new i.a({routes:[{path:"/",name:"chat",component:U},{path:"/login",name:"login",component:E}],mode:"history"}),k=n("uLgv");s.a.use(l.a);var L=new l.a.Store({state:{currentUser:null,currentChannel:null},mutations:{SET_USER:function(e,t){e.currentUser=t},SET_CURRENT_CHANNEL:function(e,t){e.currentChannel=t}},actions:{setUser:function(e,t){e.commit("SET_USER",t)},setCurrentChannel:function(e,t){(0,e.commit)("SET_CURRENT_CHANNEL",t)}},getters:{currentUser:function(e){return e.currentUser},currentChannel:function(e){return e.currentChannel}}});s.a.config.productionTip=!1;k.a.initializeApp({apiKey:"AIzaSyCJwSia2w94C0a5VrxppUFfwnXwrxEO8Gw",authDomain:"slack-chat-99187.firebaseapp.com",projectId:"slack-chat-99187",storageBucket:"slack-chat-99187.appspot.com",messagingSenderId:"901993644425",appId:"1:901993644425:web:428598a90a6864396a2158",measurementId:"G-6LX3TSWN22"}),window.firebase=k.a,new s.a({el:"#app",router:x,store:L,components:{App:r},template:"<App/>"})},ZZgg:function(e,t){},gsu9:function(e,t){},mq1k:function(e,t){},q0SP:function(e,t){},"ye3+":function(e,t){},zCuW:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.cd169f98877966d83355.js.map